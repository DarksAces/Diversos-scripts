<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Mobile Movible y Escalable</title>
<style>
  body {
    background-color: #1e1e1e;
    color: white;
    font-family: Consolas, monospace;
    font-size: 28px;
    margin: 0;
    overflow: hidden;
  }
  #content {
    padding: 20px;
    text-align: center;
    white-space: pre-wrap;
  }
  .fixed-container {
    display: flex;
    justify-content: center;
    gap: 10px;
    margin: 10px 0;
  }
  img {
    user-select: none;
    max-width: 150px;
    position: absolute;
    cursor: grab;
  }
</style>
</head>
<body>
  <div id="banner-top" class="fixed-container"></div>
  <div id="content"></div>
  <div id="banner-bottom" class="fixed-container"></div>

  <script>
    const contentDiv = document.getElementById('content');

    // Actualiza contenido en tiempo real
    window.electronAPI.onFileChange((text) => {
      contentDiv.textContent = text;
    });

    window.electronAPI.onLoadImages(({ bannersTop, mobileImgs, bannersBottom }) => {
      const topDiv = document.getElementById('banner-top');
      const bottomDiv = document.getElementById('banner-bottom');

      topDiv.innerHTML = '';
      bottomDiv.innerHTML = '';

      bannersTop.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        img.style.position = 'static';
        topDiv.appendChild(img);
      });

      bannersBottom.forEach(src => {
        const img = document.createElement('img');
        img.src = src;
        img.style.position = 'static';
        bottomDiv.appendChild(img);
      });

      // MÃ³viles movibles y escalables
      mobileImgs.forEach(src => {
        const img = document.createElement('img');
        img.src = src;

        img.style.left = Math.random() * (window.innerWidth - 150) + 'px';
        img.style.top = Math.random() * (window.innerHeight - 150) + 'px';
        img.style.width = '150px';
        img.style.height = 'auto';

        let offsetX, offsetY, isDragging = false;

        img.addEventListener('mousedown', e => {
          if (e.ctrlKey) return;
          isDragging = true;
          offsetX = e.clientX - img.offsetLeft;
          offsetY = e.clientY - img.offsetTop;
          img.style.cursor = 'grabbing';
        });

        document.addEventListener('mousemove', e => {
          if (isDragging) {
            img.style.left = (e.clientX - offsetX) + 'px';
            img.style.top = (e.clientY - offsetY) + 'px';
          }
        });

        document.addEventListener('mouseup', () => {
          if (isDragging) {
            isDragging = false;
            img.style.cursor = 'grab';
          }
        });

        // Escalar con Ctrl + arrastre vertical
        let isScaling = false;
        let startY, startHeight;

        img.addEventListener('mousedown', e => {
          if (e.ctrlKey) {
            isScaling = true;
            startY = e.clientY;
            startHeight = img.offsetHeight;
            e.preventDefault();
          }
        });

        document.addEventListener('mousemove', e => {
          if (isScaling) {
            const dy = e.clientY - startY;
            img.style.height = Math.max(50, startHeight + dy) + 'px';
            img.style.width = 'auto';
          }
        });

        document.addEventListener('mouseup', () => {
          if (isScaling) isScaling = false;
        });

        document.body.appendChild(img);
      });
    });
  </script>
</body>
</html>